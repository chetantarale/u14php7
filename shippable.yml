language: python

python:
    - 2.7

build:
  pre_ci:
    # Always pull the latest base image to avoid any cached images on the host
    - docker pull drydock/u14pls:prod

  ci:
    # We can add sanity checks to ensure the image was built successfully here
    -  docker build -t="chetantarale/u14php7pls:tip1" .
    - /u14php7/tests/_elasticsearch.sh
    - /u14php7/tests/_memcached.sh
    - /u14php7/tests/_mongo.sh
    - /u14php7/tests/_mysql.sh
    - /u14php7/tests/_postgres.sh
    - /u14php7/tests/_rabbitmq.sh
    - /u14php7/tests/_redis.sh
    - /u14php7/tests/_selenium.sh

  on_success:
    - docker push chetantarale/u14php7pls:tip1


integrations:
  hub:
    - integrationName: dockerhub
      type: docker